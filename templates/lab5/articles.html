<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–°–ø–∏—Å–æ–∫ —Å—Ç–∞—Ç–µ–π</title>
</head>
<body>
    <h1>–°–ø–∏—Å–æ–∫ —Å—Ç–∞—Ç–µ–π</h1>
    
    {% if login %}
        <p>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, {{ login }}! <a href="{{ url_for('lab5.create') }}">–°–æ–∑–¥–∞—Ç—å —Å—Ç–∞—Ç—å—é</a></p>
        <p>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∞—à–∏—Ö —Å—Ç–∞—Ç–µ–π: {{ own_count }}</p>
    {% else %}
        <p>–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç–∞—Ç–µ–π <a href="{{ url_for('lab5.login') }}">–≤–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É</a></p>
    {% endif %}

    <div class="articles-list">
        {% for article in articles %}
            <div class="article 
                       {% if article.is_favorite %}favorite{% endif %} 
                       {% if article.is_public %}public{% endif %}">
                
                <div class="article-header">
                    <h3 class="article-title">{{ article.title }}</h3>
                    <div class="badges">
                        {% if article.is_favorite %}
                            <span class="badge badge-favorite" title="–õ—é–±–∏–º–∞—è —Å—Ç–∞—Ç—å—è">‚òÖ</span>
                        {% endif %}
                        {% if article.is_public %}
                            <span class="badge badge-public" title="–ü—É–±–ª–∏—á–Ω–∞—è —Å—Ç–∞—Ç—å—è">üåê</span>
                        {% endif %}
                        {% if login and article.user_id == user_id %}
                            <span class="badge badge-own" title="–í–∞—à–∞ —Å—Ç–∞—Ç—å—è">–ú–æ—è</span>
                        {% endif %}
                    </div>
                </div>

                <div class="article-meta">
                    –ê–≤—Ç–æ—Ä: {{ article.real_name }} ({{ article.login }})
                </div>

                <div class="article-text">
                    {{ article.article_text | replace('\n', '<br>') | safe }}
                </div>

                {% if login and article.user_id == user_id %}
                <div class="actions">
                    <a href="{{ url_for('lab5.edit', article_id=article.id) }}" 
                       class="btn btn-edit">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                    <form action="{{ url_for('lab5.delete', article_id=article.id) }}" 
                          method="post" style="display: inline;">
                        <button type="submit" class="btn btn-delete" 
                                onclick="return confirm('–£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ç—å—é?')">–£–¥–∞–ª–∏—Ç—å</button>
                    </form>
                </div>
                {% endif %}
            </div>
        {% else %}
            <p>–°—Ç–∞—Ç—å–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã.</p>
        {% endfor %}
    </div>

    <p><a href="{{ url_for('lab5.lab') }}">–ù–∞–∑–∞–¥ –∫ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç–µ 5</a></p>
</body>
</html>